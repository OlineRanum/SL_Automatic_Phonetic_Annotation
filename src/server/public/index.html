<!-- public/index.html -->

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Phonetic Modelling</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <h1>Phonetic Modelling</h1>

    <!-- Tab Buttons -->
    <div class="tab">
        <button class="tablinks active" data-tab="DataViewer">Data Viewer</button>
        <button class="tablinks" data-tab="HandshapeViewer">Handshape Viewer</button>
        <button class="tablinks" data-tab="AllNotes">All Notes</button>
        <button class="tablinks" data-tab="MoCap">3D MoCap</button>
    </div>

    <!-- Tab Content: Data Viewer -->
    <div id="DataViewer" class="tabcontent active">
        <div class="data-viewer-container">
            <!-- GIF Viewer Section -->
            <div class="gif-viewer">
                <h2>GIF Viewer</h2>
                <select id="gif-select">
                    <option value="">--Select a GIF--</option>
                    <!-- Options will be populated dynamically -->
                </select>
                <div id="loading" style="display: none;">
                    Loading...
                    <div id="progress-container">
                        <div id="progress-bar"></div>
                    </div>
                </div>
                <div class="frame-display">
                    <img id="gif-image" src="" alt="Selected GIF Frame">
                    <div id="frame-info">Frame: 0</div>
                </div>
                <div class="controls">
                    <button id="prev-btn" disabled>Previous Frame</button>
                    <button id="next-btn" disabled>Next Frame</button>
                    <button id="toggle-play-btn" disabled>Play GIF</button>
                    <label for="frame-rate">Frame Rate (ms):</label>
                    <input type="number" id="frame-rate" value="200" min="10" max="1000">
                </div>
            </div>

            <!-- Note-Taking Section -->
            <div class="note-taking">
                <h2>Frame Notes</h2>
                <textarea id="note-input" placeholder="Write your note here..."></textarea>
                <button id="save-note-btn">Save Note</button>

                <div id="notes-list">
                    <!-- Notes will be dynamically added here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Tab Content: Reference Poses Viewer -->
    <div id="HandshapeViewer" class="tabcontent">
        <div class="reference-poses-layout">
            <!-- Left Column: Checkboxes and Clear All Button -->
            <div class="pose-selection">
                <label>Select Reference Poses:</label>
                <button id="clear-all-btn">Clear All</button>
                <div id="pose-select-container">
                    <!-- Checkboxes will be dynamically added here -->
                </div>
            </div>

            <!-- Right Column: Pose Display -->
            <div class="pose-display">
                <div id="pose-loading" style="display: none;">
                    Loading pose images...
                </div>
                <div id="reference-poses-container">
                    <!-- Multiple images will be displayed here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Tab Content: 3D MoCap -->
    <div id="MoCap" class="tabcontent">
    <h2>3D MoCap</h2>

    <!-- Tabs within 3D MoCap -->
    <div class="tabs">
        <button id="mocapDataViewerTab" class="mocap-tab-button">Data Viewer</button>
        <button id="mocapDataUploaderTab" class="mocap-tab-button">Upload Data</button>
        <button id="referencePoseTab" class="mocap-tab-button">Reference Pose</button>
    </div>

    <!-- Tab Content for 3D MoCap Data Viewer -->
    <div class="mocap-tab-content" id="mocapDataViewerContent" style="display: block;">
        <h3>3D MoCap Reference Handshapes</h3>
        <div class="gif-viewer-container">
            <div class="gif-viewer">
                <h4>GIF Loader</h4>
                <select id="mocap-gif-select">
                    <option value="">--Select a GIF--</option>
                    <!-- Options will be dynamically populated -->
                </select>
                <div id="mocap-loading" style="display: none;">
                    Loading...
                    <div id="mocap-progress-container">
                        <div id="mocap-progress-bar"></div>
                    </div>
                </div>
                <div class="frame-display">
                    <img id="mocap-gif-image" src="" alt="Selected GIF Frame">
                    <div id="mocap-frame-info">Frame: 0</div>
                </div>
                <div class="controls">
                    <button id="mocap-prev-btn" disabled>Previous Frame</button>
                    <button id="mocap-next-btn" disabled>Next Frame</button>
                    <button id="mocap-toggle-play-btn" disabled>Play GIF</button>
                    <label for="mocap-frame-rate">Frame Rate (ms):</label>
                    <input type="number" id="mocap-frame-rate" value="200" min="10" max="1000">
                </div>
            </div>

            <!-- Frame Index Tools -->
            <div class="mocap-selected-frames-tools" style="margin-top: 20px;">
                <div>
                <h4>Store Frame Indexes</h4>
                <label for="mocap-frame-input">Single or Range:</label>
                <input type="text" id="mocap-frame-input" placeholder="e.g. 210 or 211-234">
                <button id="mocap-save-frames-btn">Save</button>
                <div id="mocap-saved-frames-list" style="margin-top: 10px;">
                    <!-- Display stored frames dynamically -->
                </div>
            </div>

            <!-- Frame Removal Tools -->
            <div class="mocap-remove-frames-section" style="margin-top: 10px;">
                <label for="mocap-remove-input">Remove Range:</label>
                <input type="text" id="mocap-remove-input" placeholder="e.g. 211-234">
                <button id="mocap-remove-frames-btn">Remove Range</button>
            </div>
        </div>
    </div>
    </div>

    <!-- Tab Content for Reference Pose Selector -->
    <div class="mocap-tab-content" id="mocapDataUploaderContent" style="display: none;">
        <h2>MoCap Data Uploader</h2>
        <p>Upload your MoCap file to the server:</p>
        <form id="uploadForm" enctype="multipart/form-data">
            <input type="file" id="fileInput" name="mocapFile" accept=".csv" multiple />
            <button type="submit">Upload</button>
        </form>
        <div id="uploadStatus"></div>
    
        <h2>Process Data & Produce Visualization</h2>
        <p>Select files to process and produce visualizations:</p>
        <select id="fileDropdown" multiple size="5" style="width: 100%;"></select>
        <button id="processDataButton">Process Data</button>
        <button id="deleteDataButton" style="margin-left: 10px;">Delete</button>
        <div id="processStatus"></div>

        
    </div>
    

    <!-- Tab Content for Reference Pose Selector -->
    <div class="mocap-tab-content" id="referencePoseContent" style="display: none;">
        <h3>Reference Pose Selector</h3>
        <!-- Add content for Reference Pose Selector tab here -->
    </div>
    </div>


    <!-- Tab Content: All Notes -->
    <div id="AllNotes" class="tabcontent">
        <h2>All Notes</h2>
        <button id="update-all-notes-btn">Update Notes</button> <!-- Added Update Button -->
        <div id="all-notes-list"></div>
    </div>

    <!-- Notification -->
    <div id="notification" class="notification"></div>

    <!-- Main Script -->
    <script type="module" src="./js/main.js"></script>

</body>
</html>
